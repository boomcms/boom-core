/*! boom-core - v8.0.9 (2020-06-01) */

!function(t,a){"use strict";a.TemplateManager=t.View.extend({el:"body",initialize:function(e){this.templates=new a.Collections.Templates(e.templates),this.$container=this.$("#b-container"),this.router=new a.TemplateManager.Router({templates:this.templates}),this.listenTo(this.router,"home",this.home),this.listenTo(this.templates,"view",this.viewTemplate),t.history.start()},home:function(){this.$container.html(new a.TemplateManager.TemplateTable({templates:this.templates}).render().el)},viewTemplate:function(e){var t=new a.TemplateManager.TemplateView({model:e});this.$container.html(t.render().el)}})}((jQuery,Backbone),BoomCMS),function(e){"use strict";BoomCMS.TemplateManager.Router=e.Router.extend({routes:{"":"home","template/:template/pages":"viewTemplatePages"},initialize:function(e){this.templates=e.templates,this.listenTo(this.templates,"change:id",this.editGroupOnCreate),this.listenTo(this.people,"destroy",this.goBackOnPersonDelete)},home:function(){this.trigger("home")},viewTemplatePages:function(e){var t=this.templates.get(e);t.trigger("view",t)}})}(Backbone),function(e,t){"use strict";BoomCMS.TemplateManager.TemplatePageItem=t.View.extend({tagName:"tr",template:_.template(e("#b-template-page").html()),render:function(){return this.$el.html(this.template({page:this.model})),this.$("time").text(moment.unix(this.$("time").attr("datetime")).fromNow()),this}})}(jQuery,Backbone),function(a,e,i){"use strict";i.TemplateManager.TemplateTable=e.View.extend({tagName:"div",template:_.template(a("#b-template-list").html()),initialize:function(e){this.templates=e.templates},addTemplate:function(e){var t=new i.TemplateManager.TemplateTableItem({model:e}).render().$el;this.$("tbody").append(t)},render:function(){var t=this;return this.$el.html(this.template({templates:this.templates})),this.templates.each(function(e){t.addTemplate(e)}),this.$("table").tablesorter({textExtraction:function(e){var t=a(e).find("input").val();return void 0===t?a(e).text():t}}),this}})}(jQuery,Backbone,BoomCMS),function(a,e,i){"use strict";i.TemplateManager.TemplateTableItem=e.View.extend({tagName:"tr",template:_.template(a("#b-template-row").html()),events:{"click .delete":"deleteTemplate","change input":"setAttribute","keyup input":"setAttribute","paste input":"setAttribute","blur input":"saveTemplate"},initialize:function(){this.listenTo(this.model,"destroy",this.remove)},deleteTemplate:function(e){e.preventDefault();var t=this.model;i.Confirmation("Please confirm","Are you sure you want to delete the template '"+t.getName()+"'?").done(function(){t.destroy()})},render:function(){return this.$el.html(this.template({template:this.model})),this.model.fileExists()||this.$el.addClass("b-templates-nofile"),this},saveTemplate:function(){!0===this.model.needsSave&&(this.model.save(),i.Notification('Template "'+this.model.getName()+'" has been saved'))},setAttribute:function(e){var t=a(e.target);this.model.set(t.attr("name"),t.val())}})}(jQuery,Backbone,BoomCMS),function(e,t,i){"use strict";i.TemplateManager.TemplateView=t.View.extend({tagName:"div",template:_.template(e("#b-template-pages").html()),initialize:function(){this.listenTo(this.model.pages,"sync",this.addPages)},addPages:function(e){var a=this;e.each(function(e){var t=new i.TemplateManager.TemplatePageItem({model:e});a.$("tbody").append(t.render().el)}),this.$("table").tablesorter()},render:function(){return this.$el.html(this.template({template:this.model})),this.model.getPages(),this}})}(jQuery,Backbone,BoomCMS);
//# sourceMappingURL=template-manager.min.js.map