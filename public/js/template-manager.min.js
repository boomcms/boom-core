/*! boom-core - v6.2.0-dev (2017-04-13) */

!function(a,b,c){"use strict";c.TemplateManager=b.View.extend({el:"body",initialize:function(a){this.templates=new c.Collections.Templates(a.templates),this.$container=this.$("#b-container"),this.router=new c.TemplateManager.Router({templates:this.templates}),this.listenTo(this.router,"home",this.home),this.listenTo(this.templates,"view",this.viewTemplate),b.history.start()},home:function(){this.$container.html(new c.TemplateManager.TemplateTable({templates:this.templates}).render().el)},viewTemplate:function(a){var b=new c.TemplateManager.TemplateView({model:a});this.$container.html(b.render().el)}})}(jQuery,Backbone,BoomCMS),function(a,b){"use strict";b.TemplateManager.Router=a.Router.extend({routes:{"":"home","template/:template/pages":"viewTemplatePages"},initialize:function(a){this.templates=a.templates,this.listenTo(this.templates,"change:id",this.editGroupOnCreate),this.listenTo(this.people,"destroy",this.goBackOnPersonDelete)},home:function(){this.trigger("home")},viewTemplatePages:function(a){var b=this.templates.get(a);b.trigger("view",b)}})}(Backbone,BoomCMS),function(a,b,c){"use strict";c.TemplateManager.TemplatePageItem=b.View.extend({tagName:"tr",template:_.template(a("#b-template-page").html()),render:function(){return this.$el.html(this.template({page:this.model})),this.$("time").text(moment.unix(this.$("time").attr("datetime")).fromNow()),this}})}(jQuery,Backbone,BoomCMS),function(a,b,c){"use strict";c.TemplateManager.TemplateTable=b.View.extend({tagName:"div",template:_.template(a("#b-template-list").html()),initialize:function(a){this.templates=a.templates},addTemplate:function(a){var b=new c.TemplateManager.TemplateTableItem({model:a}),d=b.render().$el;this.$("tbody").append(d)},render:function(){var b=this;return this.$el.html(this.template({templates:this.templates})),this.templates.each(function(a){b.addTemplate(a)}),this.$("table").tablesorter({textExtraction:function(b){var c=a(b).find("input").val();return void 0===c?a(b).text():c}}),this}})}(jQuery,Backbone,BoomCMS),function(a,b,c){"use strict";c.TemplateManager.TemplateTableItem=b.View.extend({tagName:"tr",template:_.template(a("#b-template-row").html()),events:{"click .delete":"deleteTemplate","change input":"setAttribute","keyup input":"setAttribute","paste input":"setAttribute","blur input":"saveTemplate"},initialize:function(){this.listenTo(this.model,"destroy",this.remove)},deleteTemplate:function(a){a.preventDefault();var b=this.model;c.Confirmation("Please confirm","Are you sure you want to delete the template '"+b.getName()+"'?").done(function(){b.destroy()})},render:function(){return this.$el.html(this.template({template:this.model})),this.model.fileExists()||this.$el.addClass("b-templates-nofile"),this},saveTemplate:function(){!0===this.model.needsSave&&(this.model.save(),c.Notification('Template "'+this.model.getName()+'" has been saved'))},setAttribute:function(b){var c=a(b.target);this.model.set(c.attr("name"),c.val())}})}(jQuery,Backbone,BoomCMS),function(a,b,c){"use strict";c.TemplateManager.TemplateView=b.View.extend({tagName:"div",template:_.template(a("#b-template-pages").html()),initialize:function(){this.listenTo(this.model.pages,"sync",this.addPages)},addPages:function(a){var b=this;a.each(function(a){var d=new c.TemplateManager.TemplatePageItem({model:a});b.$("tbody").append(d.render().el)}),this.$("table").tablesorter()},render:function(){return this.$el.html(this.template({template:this.model})),this.model.getPages(),this}})}(jQuery,Backbone,BoomCMS);
//# sourceMappingURL=template-manager.min.js.map